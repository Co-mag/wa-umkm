<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>WakWak CMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/images/uploads/favicon.png" />

  <!-- Custom CSS untuk seluruh admin -->
  <link rel="stylesheet" href="/admin/custom.css" />
</head>
<body>
  <!-- Inisialisasi DecapCMS -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

  <script>
    // Tambahkan stylesheet juga ke iframe Preview
    CMS.registerPreviewStyle('/admin/custom-preview.css');

    // Contoh: Preview Template untuk koleksi "produk"
    const ProdukPreview = ({ entry, widgetFor }) => {
      const data = entry.get('data');
      return h('article', { className: 'produk-preview' }, [
        h('h1', {}, data.get('title') || 'Nama Produk'),
        h('p', { className: 'price' }, 'Rp ' + (data.get('price') || '0')),
        h('div', { className: 'image' }, [
          h('img', { src: data.get('image') || '', alt: data.get('title') || '' })
        ]),
        h('div', { className: 'body' }, widgetFor('body'))
      ]);
    };
    CMS.registerPreviewTemplate('produk', ProdukPreview);

    // Ganti logo login (opsional, jika pakai Netlify Identity)
    window.CMS_MANUAL_INIT = true;
    CMS.init({ config: { load_config_file: true, logo_url: '/images/uploads/logo-admin.png' } });
  </script>
</body>
</html>
